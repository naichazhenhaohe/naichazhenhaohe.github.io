<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">





















  
  
  
  

  
    
    
  

  
    
      
    

    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
    
    <link rel="stylesheet" href="https://fonts.cat.net/css?family=Roboto:300,300italic,400,400italic,700,700italic|Open Sans:300,300italic,400,400italic,700,700italic|Ubuntu:300,300italic,400,400italic,700,700italic|Quicksand:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext">
  






<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/logo.ico?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo.ico?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo.ico?v=7.1.2">


  <link rel="mask-icon" href="/logo.ico?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="table th:first-of-type {     width: 75px; }  table a {   color: #d6a3dc;   border-bottom: none;   transition: color 0.5s ease-out; }  table a:hover {   color: #f7db70;   border-bottom: none; }   对于正则">
<meta name="keywords" content="JavaScript,regex">
<meta property="og:type" content="article">
<meta property="og:title" content="关于JavaScript正则">
<meta property="og:url" content="https://naichazhenhaohe.github.io/2019/06/17/关于JavaScript正则/index.html">
<meta property="og:site_name" content="학교가 싫어요">
<meta property="og:description" content="table th:first-of-type {     width: 75px; }  table a {   color: #d6a3dc;   border-bottom: none;   transition: color 0.5s ease-out; }  table a:hover {   color: #f7db70;   border-bottom: none; }   对于正则">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-06-22T12:59:46.885Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="关于JavaScript正则">
<meta name="twitter:description" content="table th:first-of-type {     width: 75px; }  table a {   color: #d6a3dc;   border-bottom: none;   transition: color 0.5s ease-out; }  table a:hover {   color: #f7db70;   border-bottom: none; }   对于正则">





  
  
  <link rel="canonical" href="https://naichazhenhaohe.github.io/2019/06/17/关于JavaScript正则/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>关于JavaScript正则 | 학교가 싫어요</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">학교가 싫어요</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-链接">

    
    
    
      
    

    

    <a href="/links/" rel="section"><i class="menu-item-icon fa fa-fw fa-link"></i> <br>链接</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://naichazhenhaohe.github.io/2019/06/17/关于JavaScript正则/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="bbbiaozzza">
      <meta itemprop="description" content="bbbiaozzza的个人主页">
      <meta itemprop="image" content="/images/wjc.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="학교가 싫어요">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">关于JavaScript正则

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-06-17 16:38:41" itemprop="dateCreated datePublished" datetime="2019-06-17T16:38:41+08:00">2019-06-17</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">7.9k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">14 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <style>
table th:first-of-type {
    width: 75px;
}

table a {
  color: #d6a3dc;
  border-bottom: none;
  transition: color 0.5s ease-out;
}

table a:hover {
  color: #f7db70;
  border-bottom: none;
}
</style>

<p>对于正则的使用只在 python 中使用过…</p>
<p>对于 JavaScript 中的正则认知一直保留在&#39;它是一个对象&#39;上。</p>
<p>所以打算正式的学一学。</p>
<a id="more"></a>

<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener">参考文档</a></p>
<h1 id="创建正则表达式"><a href="#创建正则表达式" class="headerlink" title="创建正则表达式"></a>创建正则表达式</h1><h2 id="包含在斜杠之间"><a href="#包含在斜杠之间" class="headerlink" title="包含在斜杠之间"></a><font size="4">包含在斜杠之间</font></h2><figure class="highlight js"><figcaption><span>code</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> regex = <span class="regexp">/ab+c/</span></span><br><span class="line"><span class="keyword">const</span> regex = <span class="regexp">/a*c/gi</span></span><br></pre></td></tr></table></figure>

<p>当正则表达不会变动时 建议采用此方法</p>
<h2 id="调用RegExp对象的构造函数"><a href="#调用RegExp对象的构造函数" class="headerlink" title="调用RegExp对象的构造函数"></a><font size="4">调用RegExp对象的构造函数</font></h2><figure class="highlight js"><figcaption><span>code</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以直接使用字符串</span></span><br><span class="line"><span class="keyword">let</span> regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'ab+c'</span>);</span><br><span class="line"><span class="comment">//也可以使用 / 进行包裹内容</span></span><br><span class="line"><span class="keyword">let</span> regex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="regexp">/a*c/</span>, <span class="string">'gi'</span>);</span><br></pre></td></tr></table></figure>

<p>当正则表达会变动时，如由用户输入、模式会改变等 建议采用此方法</p>
<h1 id="正则修饰符-标志"><a href="#正则修饰符-标志" class="headerlink" title="正则修饰符(标志)"></a>正则修饰符(标志)</h1><p>JavaScript 的正则表达式有修饰符的使用，相比 python 的正则来说用法差异还是有点大的。<br>JavaScript 的正则修饰符( mdn 中称为标志) 有：</p>
<ol>
<li>g / i / m 这三个较为常用</li>
<li>y / u 是在 ES6 中新增修饰符</li>
<li>还有一些其他的，比如 s / U / x / A 等</li>
</ol>
<h2 id="g"><a href="#g" class="headerlink" title="g"></a><font size="4">g</font></h2><p>global 全局搜索，就是说不会匹配到一个匹配项之后就停止，而是一直匹配到输入的结束。</p>
<h2 id="i"><a href="#i" class="headerlink" title="i"></a><font size="4">i</font></h2><p>ignore 大小写不敏感。</p>
<h2 id="m"><a href="#m" class="headerlink" title="m"></a><font size="4">m</font></h2><p>more 允许多行搜索。</p>
<h2 id="y"><a href="#y" class="headerlink" title="y"></a><font size="4">y</font></h2><p><strong> ES6 新增修饰符</strong> <a href="https://blog.csdn.net/ww430430/article/details/78403536" target="_blank" rel="noopener">参考博客</a></p>
<p>执行&#39;粘性&#39;搜索，匹配从目标字符串的当前位置开始，可以使用 y 标志。( ← MDN 中的描述，但是看不太懂</p>
<p>y 修饰符的作用与 g 修饰符类似，也是全局匹配，后一次匹配都从上一次匹配成功的下一个位置开始。不同之处在于，g 修饰符只要剩余位置中存在匹配就可，而 y 修饰符确保匹配必须从剩余的第一个位置开始，这也就是&#39;粘连&#39;的含义。 （ ← 博客中的说法，get!</p>
<p>其实两种说法都有一定理解难度，所以遇事不决举个栗子。</p>
<figure class="highlight js"><figcaption><span>code</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//匹配用字符串</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="string">'123123'</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="string">'123_123'</span></span><br><span class="line"><span class="comment">//正则表达式</span></span><br><span class="line"><span class="keyword">let</span> r1 = <span class="regexp">/123/y</span></span><br><span class="line"><span class="keyword">let</span> r2 = <span class="regexp">/123/y</span></span><br><span class="line"><span class="keyword">let</span> r3 = <span class="regexp">/123/g</span></span><br><span class="line"><span class="built_in">console</span>.log(r1.exec(a)) <span class="comment">//[ '123', index: 0, input: '123123', groups: undefined ]</span></span><br><span class="line"><span class="built_in">console</span>.log(r1.exec(a)) <span class="comment">//[ '123', index: 3, input: '123123', groups: undefined ]</span></span><br><span class="line"><span class="built_in">console</span>.log(r2.exec(b)) <span class="comment">//[ '123', index: 0, input: '123_123', groups: undefined ]</span></span><br><span class="line"><span class="built_in">console</span>.log(r2.exec(b)) <span class="comment">//null</span></span><br><span class="line"><span class="built_in">console</span>.log(r3.exec(b)) <span class="comment">//[ '123', index: 0, input: '123_123', groups: undefined ]</span></span><br><span class="line"><span class="built_in">console</span>.log(r3.exec(b)) <span class="comment">//[ '123', index: 4, input: '123_123', groups: undefined ]</span></span><br></pre></td></tr></table></figure>

<p>上面的例子中的 null 原因就是第一次匹配之后剩下的字符为 &#39;_123&#39; 而粘性搜索要求匹配必须在剩余字符串首，所以只有当且仅当剩下的字符为 &#39;123α&#39;( α 为任意数量的任意字符)才会匹配到</p>
<h2 id="u"><a href="#u" class="headerlink" title="u"></a><font size="4">u</font></h2><p><strong> ES6 新增修饰符</strong> <a href="https://blog.csdn.net/ww430430/article/details/78403536" target="_blank" rel="noopener">参考博客</a></p>
<p>u (小写，和大写的 U 是不同的)这个修饰符在 MDN 中文文档里没有提到。但是之前在阮一峰的 《ES6 标准入门》里看到过。<br>u 指的是 &#39;unicode&#39; , 用于处理大于 \uFFFF 的 Unicode 字符(就是四个字符的 UTF-16 编码<br>(说起来从来没有用到过 utf-16 的字符</p>
<p>那么遇事不决举个参考博客中的栗子： </p>
<figure class="highlight js"><figcaption><span>code</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> R1 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="regexp">/^\uD83D/</span>)</span><br><span class="line"><span class="keyword">const</span> R2 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="regexp">/^\uD83D/</span>,<span class="string">'u'</span>)</span><br><span class="line"></span><br><span class="line">R1.test(<span class="string">"\uD83D\uDc2A"</span>) <span class="comment">//true</span></span><br><span class="line">R2.test(<span class="string">"\uD83D\uDc2A"</span>) <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<p>可以看到 R2 的检测结果是 false 因为 \uD8F2\uDc2A 是一个四字节的 UTF-16 编码，在加了 u 修饰符之后会把 \uD8F2\uDc2A 识别为一整个字符。</p>
<h1 id="正则的特殊符号"><a href="#正则的特殊符号" class="headerlink" title="正则的特殊符号"></a>正则的特殊符号</h1><table>
<thead>
<tr>
<th align="center">字符</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">\</td>
<td align="left">1. 用于转义<br> 2.后接字母表示特殊含义如 \b, \d 等</td>
</tr>
<tr>
<td align="center">^</td>
<td align="left">匹配输入的开始。如果多行标志被设置为true，那么也匹配换行符后紧跟的位置。<br>举个例子： \^demo\ 与以&#39;demo&#39;开头的文本匹配，如&#39;demonstrate&#39; 可以匹配 但是&#39;this is a demo&#39; 不行</td>
</tr>
<tr>
<td align="center">$</td>
<td align="left">和 ^ 作用类似。区别在于 $ 用于匹配输入的结束。如果多行标示被设置为true，那么也匹配换行符前的位置。在 ^ 的例子中，若是 \demo$\ 则 &#39;demonstrate&#39; 不行 但是&#39;this is a demo&#39; 可以</td>
</tr>
<tr>
<td align="center">*</td>
<td align="left">匹配前一表达式0次或多次<br>举个例子：/bo*/会匹配 &#39;A ghost boooooed&#39; 中的 ‘booooo’ 和 &#39;A bird warbled&#39; 中的 ‘b’</td>
</tr>
<tr>
<td align="center">+</td>
<td align="left">匹配前一表达式1次或多次</td>
</tr>
<tr>
<td align="center">?</td>
<td align="left">1. 匹配前一表达式0次或1次<br>2. 如果紧跟在任何量词 *、 +、? 或 {} 的后面，将会使量词变为非贪婪的<br>举个例子：对 &#39;123abc&#39; 应用 /\d+/ 将会返回 &#39;123&#39;，如果使用 /\d+?/,那么就只会匹配到 &#39;1&#39;。<br>3.先行断言</td>
</tr>
<tr>
<td align="center">.</td>
<td align="left">匹配换行符之外的任意字符</td>
</tr>
<tr>
<td align="center">( )</td>
<td align="left"><a href="https://www.cnblogs.com/snandy/p/3650309.html" target="_blank" rel="noopener">参考博客</a><br>1.用于限定量词范围，例如/(demo)?/匹配0或多个&#39;demo&#39;<br> 2. 捕获功能</td>
</tr>
<tr>
<td align="center">\x</td>
<td align="left">&#39;x&#39; 是数字。返回最后的第n个子捕获匹配的子字符串(捕获的数目以左括号计数)</td>
</tr>
<tr>
<td align="center">(?:x)</td>
<td align="left">匹配 &#39;x&#39; 但是不记住匹配项。上面一行的博客中也有有提到，只分组不捕获</td>
</tr>
<tr>
<td align="center">(?<name>…)</name></td>
<td align="left">比普通的分组多了<name>，可以给分组的内容起名字</name></td>
</tr>
<tr>
<td align="center">x(?=y)</td>
<td align="left">匹配&#39;x&#39;仅仅当&#39;x&#39;后面跟着&#39;y&#39;.称为先行断言。告诉正则表达式继续向后看一些字符但是并不移动位置(就是说不匹配y)</td>
</tr>
<tr>
<td align="center">(?&lt;=y)x</td>
<td align="left">匹配&#39;x&#39;仅仅当&#39;x&#39;前面是&#39;y&#39;.称为后行断言。</td>
</tr>
<tr>
<td align="center">x(?!y)</td>
<td align="left">匹配&#39;x&#39;仅仅当&#39;x&#39;后面不跟着&#39;y&#39;,称为正向否定查找。</td>
</tr>
<tr>
<td align="center">x|y</td>
<td align="left">匹配&#39;x&#39;或&#39;y&#39;</td>
</tr>
<tr>
<td align="center">{n}</td>
<td align="left">n是一个正整数，匹配了前面一个字符刚好发生了n次。<br>举个例子：/a{2}/不会匹配&#39;candy&#39;中的&#39;a&#39;,但是会匹配&#39;caandy&#39;中所有的&#39;a&#39;，以及&#39;caaandy&#39;中的前两个&#39;a&#39;</td>
</tr>
<tr>
<td align="center">{n,m}</td>
<td align="left">n 和 m 都是整数。匹配前面的字符至少 n 次，最多 m 次。如果 n 或者 m 的值是0， 这个值被忽略。</td>
</tr>
<tr>
<td align="center">[xyz]</td>
<td align="left">一个字符集合。匹配方括号中的任意字符。可以使用 - 进行指定字符范围。</td>
</tr>
<tr>
<td align="center">[^xyz]</td>
<td align="left">一个反向字符集。也就是说， 它匹配任何没有包含在方括号中的字符。</td>
</tr>
<tr>
<td align="center">[\b]</td>
<td align="left">匹配退格</td>
</tr>
<tr>
<td align="center">\b</td>
<td align="left">匹配单词边界。一个词的边界就是一个词不被另外一个&#39;字&#39;字符跟随的位置或者没有其他&#39;字&#39;字符在其前面的位置。(狗屎这个看不懂啊！)。换个网搜的说法：如果字符的左右两边有空白字符则为单词边界</td>
</tr>
<tr>
<td align="center">\B</td>
<td align="left">匹配非单词边界。字符左右两边没有空白字符就是非单词边界</td>
</tr>
<tr>
<td align="center">\d</td>
<td align="left">匹配一个数字,等于[0-9]</td>
</tr>
<tr>
<td align="center">\D</td>
<td align="left">匹配一个非数字,等于[^0-9]</td>
</tr>
<tr>
<td align="center">\f</td>
<td align="left">匹配换页符</td>
</tr>
<tr>
<td align="center">\n</td>
<td align="left">匹配换行符</td>
</tr>
<tr>
<td align="center">\r</td>
<td align="left">匹配回车符</td>
</tr>
<tr>
<td align="center">\t</td>
<td align="left">匹配一个水平制表符</td>
</tr>
<tr>
<td align="center">\v</td>
<td align="left">匹配一个垂直制表符</td>
</tr>
<tr>
<td align="center">\s</td>
<td align="left">匹配一个空白字符，包括空格、制表符、换页符和换行符。</td>
</tr>
<tr>
<td align="center">\S</td>
<td align="left">匹配一个非空白字符</td>
</tr>
<tr>
<td align="center">\w</td>
<td align="left">匹配一个字母、数字或者下划线,等价于[A-Za-z0-9_]</td>
</tr>
<tr>
<td align="center">\W</td>
<td align="left">匹配一个非字母、数字或者下划线,等价于[^A-Za-z0-9_]</td>
</tr>
</tbody></table>
<p>QAQ 好多啊</p>
<h1 id="正则表达式的使用-应用"><a href="#正则表达式的使用-应用" class="headerlink" title="正则表达式的使用 (应用)"></a>正则表达式的使用 (应用)</h1><p>匹配出来总要用的嘛！<br>使用正则表达式的方法这里分为两类，一类是 RegExp 的方法，另一类是 String 的方法。</p>
<h2 id="RegExp-的方法"><a href="#RegExp-的方法" class="headerlink" title="RegExp 的方法"></a><font size="4">RegExp 的方法</font></h2><p>有两个，在上面的 보기 中有使用到。<br>一个是 exec( ) 另一个是 test( )</p>
<h3 id="RegExp-exec"><a href="#RegExp-exec" class="headerlink" title=" RegExp.exec( ) "></a><font size="3"> RegExp.exec( ) </font></h3><p>参数： 字符串<br>返回值： 数组 or null</p>
<p>当且仅当没有匹配结果时返回 null 。<br>有匹配结果时，数组的第一元素为匹配到的文本，紧跟的元素是用 ( ) 捕获的内容，之后的元素是 index 属性，为匹配到的文本在源字符串中的下标，再之后的元素为 input 属性，保存源字符串，最后会有一个 groups 属性，好像是 ES6 新增的，用于存储对捕获分组的内容。</p>
<p>举个例子：</p>
<figure class="highlight js"><figcaption><span>code</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rDate = <span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;date&gt;\d&#123;2&#125;)/</span> </span><br><span class="line">R.exec(<span class="string">'2019-06-17'</span>)</span><br><span class="line"><span class="comment">/* output:</span></span><br><span class="line"><span class="comment">[ '2019-06-17',</span></span><br><span class="line"><span class="comment">  '2019',</span></span><br><span class="line"><span class="comment">  '06',</span></span><br><span class="line"><span class="comment">  '17',</span></span><br><span class="line"><span class="comment">  index: 0,</span></span><br><span class="line"><span class="comment">  input: '2019-06-17',</span></span><br><span class="line"><span class="comment">  groups: [Object: null prototype] &#123; year: '2019', month: '06', date: '17' &#125; ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="RegExp-test"><a href="#RegExp-test" class="headerlink" title=" RegExp.test( ) "></a><font size="3"> RegExp.test( ) </font></h3><p>判断一个模式是否存在于某个字符串中。</p>
<p>参数： 字符串<br>返回值： true or false</p>
<p>하지만!</p>
<p>当 RegExp 设置了全局标志，test( ) 的执行也(为什么是&#39;也&#39;呢?因为其实 exec( ) 也会，但是为什么上面没有提到呢? 因为懒，不想回去填坑了呜呜呜)会改变 RegExp 的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/lastIndex" target="_blank" rel="noopener">lastIndex</a> 值。后续的执行会从 lastIndex 处开始匹配。(RegExp.exec( )同理)</p>
<p>来来来，遇事不决举个栗子：</p>
<figure class="highlight js"><figcaption><span>code</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> R = <span class="regexp">/\d/g</span></span><br><span class="line">R.test(<span class="string">'3 three 2 two one'</span>)</span><br><span class="line"><span class="comment">// true 这里匹配到的是 3 剩余的字符串为 ' three 2 two one'</span></span><br><span class="line">R.test(<span class="string">'3 three 2 two one'</span>)</span><br><span class="line"><span class="comment">// true 这里匹配到的是 2 剩余的字符串为 ' two one'</span></span><br><span class="line">R.test(<span class="string">'3 three 2 two one'</span>)</span><br><span class="line"><span class="comment">// false 这里 false 的原因因为 ' two one' 中没有数字啦</span></span><br></pre></td></tr></table></figure>

<h2 id="String-的方法"><a href="#String-的方法" class="headerlink" title="String 的方法"></a><font size="4">String 的方法</font></h2><p>啊 这个就比较多了（感觉更常用</p>
<ol>
<li>str.match( )</li>
<li>str.search( )</li>
<li>str.replace( )</li>
<li>str.split( )</li>
</ol>
<h3 id="str-match"><a href="#str-match" class="headerlink" title=" str.match( ) "></a><font size="3"> str.match( ) </font></h3><p>参数：RegExp | 非 RegExp 对象的对象 | 空<br>返回值：数组 | null</p>
<p>使用了 g 修饰符，则没有匹配内容时，返回 null ，有匹配内容时，返回匹配内容的数组<br>如果未使用 g 修饰符，则返回第一个匹配项的信息及补捕获组，和 RegExp.exec( ) 的返回值一样（就是说不含 g 标志时，str.match( ) 和 RegExp.exec( ) 一致</p>
<p>举个例子：</p>
<figure class="highlight js"><figcaption><span>code</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">'no number'</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="string">'1 number: 23'</span></span><br><span class="line">a.match(<span class="regexp">/\d/g</span>) <span class="comment">//output: null</span></span><br><span class="line">b.match(<span class="regexp">/\d/g</span>) <span class="comment">//output: [ '1', '2', '3' ]</span></span><br><span class="line"><span class="comment">//未使用 g 修饰符</span></span><br><span class="line"><span class="string">'2019-06-17'</span>.match(<span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;date&gt;\d&#123;2&#125;)/</span>)</span><br><span class="line"><span class="comment">/* output:</span></span><br><span class="line"><span class="comment">[ '2019-06-17',</span></span><br><span class="line"><span class="comment">  '2019',</span></span><br><span class="line"><span class="comment">  '06',</span></span><br><span class="line"><span class="comment">  '17',</span></span><br><span class="line"><span class="comment">  index: 0,</span></span><br><span class="line"><span class="comment">  input: '2019-06-17',</span></span><br><span class="line"><span class="comment">  groups: [Object: null prototype] &#123; year: '2019', month: '06', date: '17' &#125; ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>拓展一下上面例子的应用。</p>
<figure class="highlight js"><figcaption><span>code</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> GROUPS = <span class="string">'2019-06-17'</span>.match(<span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;date&gt;\d&#123;2&#125;)/</span>).groups</span><br><span class="line"><span class="comment">//GROUPS 为 &#123;year: '2019', month: '06', date: '17'&#125;</span></span><br><span class="line"><span class="keyword">let</span> &#123; year, month, date &#125; = GROUPS</span><br></pre></td></tr></table></figure>

<p><strong>当传的参数为空时，返回值为包含一个空字符串的数组 [“”]</strong></p>
<p>当参数为非正则表达式对象 str.match(obj) 。会先调用 new RegExp(obj) 隐式的转化成一个 RegExp</p>
<p>再举个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"i don't know"</span>.match(<span class="string">'do'</span>)</span><br><span class="line"><span class="comment">// output: [ 'do', index: 2, input: 'i don\'t know', groups: undefined ]</span></span><br><span class="line"><span class="string">"i don't know"</span>.match(<span class="string">'dot'</span>)</span><br><span class="line"><span class="comment">// output: null</span></span><br></pre></td></tr></table></figure>

<h3 id="str-search"><a href="#str-search" class="headerlink" title=" str.search( ) "></a><font size="3"> str.search( ) </font></h3><p>参数： RegExp 对象 | 非 RegExp 对象的对象 |<br>返回值： 匹配成功则返回第一个匹配项的下标 | 匹配失败则返回 -1 </p>
<p>和 str.indexOf( ) 很像ㄟ 。</p>
<p>区别在于 indexOf( ) 的参数为 searchValue &#39;搜索的目标子字符串&#39; 和 fromIndex &#39;从 fromIndex 这个位置开始搜索&#39;<br>相似点的 indexOf( ) &amp; search( ) 都是大小写敏感的。</p>
<p>当输入的参数为非 RegExp 对象的对象时，进行的处理与 str.match( ) 一致。<br>功能与 RegExp.test( ) 类似。</p>
<p>하지만!</p>
<p>需要注意的是 str.search( ) <strong>无视 g 修饰符和 RegExp 对象的 lastIndex 属性, 返回值总是第一个匹配到的匹配项的下标或者 -1 。</strong>、</p>
<h3 id="str-replace"><a href="#str-replace" class="headerlink" title=" str.replace( ) "></a><font size="3"> str.replace( ) </font></h3><p>参数： RegExp | SubStr, newSubStr | function</p>
<ol>
<li>RegExp 对象，该正则匹配到的内容会被第二个参数(或其返回值)替换。</li>
<li>SubStr，将被替换掉的字符串，仅<strong>第一个</strong>匹配项会被替换。</li>
<li>newSubStr，用于替换第一个参数匹配到的结果。</li>
<li>function，用于创建新子字符串的函数，函数的返回值将替换掉第一个参数匹配到的结果。</li>
</ol>
<p>返回值：替换完成的新字符串。</p>
<p>newSubStr中可以使用特殊变量</p>
<ol>
<li>$$ 插入一个&#39;$&#39;, 类似于\\ ；</li>
<li>$&amp; 插入匹配的子串 例如 str.replace(RegExp,’$&amp;’) 不会发生任何变化；</li>
<li>$` 插入匹配项的左边的内容；</li>
<li>$’ 插入匹配项的右边的内容；</li>
<li>$n 假如第一个参数是 RegExp对象，并且 n 是个小于100的非负整数，那么插入第 n 个括号匹配的字符串，<strong>n 从 1 开始</strong>。</li>
</ol>
<p>function<br>当第一个参数为 RegExp 且使用了 g 修饰符时，每次匹配都会调用 function 。<br>函数的参数：</p>
<ol>
<li>match 匹配的子串，类似于上面的 $&amp;</li>
<li>p1,p2… 类似于上面的$1,$2…</li>
<li>offset 匹配到的自字符在原字符串中的偏移量</li>
<li>string 原字符串。</li>
</ol>
<h3 id="str-split"><a href="#str-split" class="headerlink" title=" str.split( ) "></a><font size="3"> str.split( ) </font></h3><p>最后一个了！最后一个了！</p>
<p>参数： [separator[, limit]]</p>
<ol>
<li>separator 指定表示每个拆分应发生的点的字符串。可以是 str 也可以是 RegExp。</li>
<li>limit 整数，限定返回的分割片段数量。</li>
</ol>
<p>返回值： 分隔好的数组</p>
<p>举两个 MDN 中的例子：</p>
<figure class="highlight js"><figcaption><span>code</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// example 1 : </span></span><br><span class="line"><span class="keyword">const</span> names = <span class="string">"Harry Trump ;Fred Barney; Helen Rigby ; Bill Abel ;Chris Hand "</span>;</span><br><span class="line"><span class="built_in">console</span>.log(names);</span><br><span class="line"><span class="comment">//output: Harry Trump ;Fred Barney; Helen Rigby ; Bill Abel ;Chris Hand </span></span><br><span class="line"><span class="keyword">const</span> re = <span class="regexp">/\s*(?:;|$)\s*/</span>;</span><br><span class="line"><span class="keyword">const</span> nameList = names.split(re);</span><br><span class="line"><span class="built_in">console</span>.log(nameList);</span><br><span class="line"><span class="comment">//output: [ "Harry Trump", "Fred Barney", "Helen Rigby", "Bill Abel", "Chris Hand", "" ]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// example 2 :</span></span><br><span class="line"><span class="keyword">const</span> myString = <span class="string">"Hello World. How are you doing?"</span>;</span><br><span class="line"><span class="keyword">const</span> splits = myString.split(<span class="string">" "</span>, <span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(splits);</span><br><span class="line"><span class="comment">//output: ["Hello", "World.", "How"]</span></span><br></pre></td></tr></table></figure>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>那就差不多是这样了。</p>
<p>以怎么定义、有哪些内容、怎么使用三个方面来搞了一下 JavaScript 的正则。</p>
<p>内容还是好多的啊，尤其是特殊符号里内容贼多，但是其实常用的也就那么一些。</p>
<p>整体感觉就是和 css 的 animation 一样，明明就一个东西却能玩出花来。</p>
<p>好啦那么</p>
<p> <del>祝大家新年快乐</del></p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
            <a href="/tags/regex/" rel="tag"># regex</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/11/《深入React技术栈》-제3장/" rel="next" title="《深入React技术栈》-제3장">
                <i class="fa fa-chevron-left"></i> 《深入React技术栈》-제3장
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/19/关于React-lazy和Suspense/" rel="prev" title="关于React.lazy和Suspense">
                关于React.lazy和Suspense <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/wjc.png" alt="bbbiaozzza">
            
              <p class="site-author-name" itemprop="name">bbbiaozzza</p>
              <div class="site-description motion-element" itemprop="description">bbbiaozzza的个人主页</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">21</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/naichazhenhaohe" title="GitHub &rarr; https://github.com/naichazhenhaohe" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:bbbiaozzza@gmail.com" title="E-Mail &rarr; mailto:bbbiaozzza@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#创建正则表达式"><span class="nav-number">1.</span> <span class="nav-text">创建正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#包含在斜杠之间"><span class="nav-number">1.1.</span> <span class="nav-text">包含在斜杠之间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#调用RegExp对象的构造函数"><span class="nav-number">1.2.</span> <span class="nav-text">调用RegExp对象的构造函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#正则修饰符-标志"><span class="nav-number">2.</span> <span class="nav-text">正则修饰符(标志)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#g"><span class="nav-number">2.1.</span> <span class="nav-text">g</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#i"><span class="nav-number">2.2.</span> <span class="nav-text">i</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#m"><span class="nav-number">2.3.</span> <span class="nav-text">m</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#y"><span class="nav-number">2.4.</span> <span class="nav-text">y</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#u"><span class="nav-number">2.5.</span> <span class="nav-text">u</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#正则的特殊符号"><span class="nav-number">3.</span> <span class="nav-text">正则的特殊符号</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#正则表达式的使用-应用"><span class="nav-number">4.</span> <span class="nav-text">正则表达式的使用 (应用)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#RegExp-的方法"><span class="nav-number">4.1.</span> <span class="nav-text">RegExp 的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RegExp-exec"><span class="nav-number">4.1.1.</span> <span class="nav-text"> RegExp.exec( ) </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RegExp-test"><span class="nav-number">4.1.2.</span> <span class="nav-text"> RegExp.test( ) </span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#String-的方法"><span class="nav-number">4.2.</span> <span class="nav-text">String 的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#str-match"><span class="nav-number">4.2.1.</span> <span class="nav-text"> str.match( ) </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#str-search"><span class="nav-number">4.2.2.</span> <span class="nav-text"> str.search( ) </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#str-replace"><span class="nav-number">4.2.3.</span> <span class="nav-text"> str.replace( ) </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#str-split"><span class="nav-number">4.2.4.</span> <span class="nav-text"> str.split( ) </span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#总结"><span class="nav-number">5.</span> <span class="nav-text">总结</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-sun-o"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">bbbiaozzza</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">71k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">2:09</span>
  
</div>









        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
  
  <script color="51,51,51" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest-nomobile.min.js"></script>













  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.2"></script>




  
  <script src="/js/scrollspy.js?v=7.1.2"></script>
<script src="/js/post-details.js?v=7.1.2"></script>



  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  
<script>
  $('.highlight').not('.gist .highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  

<script src="https://cdn.jsdelivr.net/npm/live2d-widget@^3.1.3/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"left","hOffset":30,"vOffset":0},"mobile":{"show":false,"scale":0.05},"react":{"opacityDefault":1,"opacityOnHover":0.2},"log":false});</script></body>
</html>
